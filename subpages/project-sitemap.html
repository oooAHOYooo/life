<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Project Sitemap - LifeOS | Visual Hierarchy of All
            Projects</title>
        <meta name="description"
            content="Complete visual hierarchy and sitemap of all projects, ideas, and their relationships across different aspects of life management.">
        <meta name="keywords"
            content="project sitemap, life management, project hierarchy, visual organization, project tracking, LifeOS">
        <meta name="author" content="LifeOS">
        <meta name="robots" content="index, follow">
        <meta name="theme-color" content="#0a0e27">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url"
            content="https://lifeos.app/subpages/project-sitemap.html">
        <meta property="og:title" content="Project Sitemap - LifeOS">
        <meta property="og:description"
            content="Complete visual hierarchy and sitemap of all projects, ideas, and their relationships.">

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url"
            content="https://lifeos.app/subpages/project-sitemap.html">
        <meta property="twitter:title" content="Project Sitemap - LifeOS">
        <meta property="twitter:description"
            content="Complete visual hierarchy and sitemap of all projects, ideas, and their relationships.">

        <link rel="stylesheet" href="../styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet" media="print" onload="this.media='all'">
        <noscript><link
                href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
                rel="stylesheet"></noscript>
        <link rel="stylesheet" href="../design-system.css">
    </head>
    <body>
        <div class="sitemap-container">
            <a href="../index.html" class="back-link">← Back to LifeOS</a>

            <header>
                <h1>Project Sitemap & Visual Hierarchy</h1>
                <p>Complete overview of all projects, ideas, and their
                    relationships across different aspects of life</p>
            </header>

            <div id="sitemapContent">
                <!-- Sitemap content will be loaded here -->
            </div>
        </div>

        <script>
        class SitemapPage {
            constructor() {
                this.allData = {};
                this.init();
            }

            async init() {
                await this.loadAllData();
                this.renderStats();
                this.renderSitemap();
            }

            async loadAllData() {
                try {
                    const response = await fetch('../data/barnacle-projects.json');
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const barnacleProjects = await response.json();
                    this.allData = { barnacleProjects };
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.showError('Failed to load project data.');
                }
            }

            renderStats() {
                const statsContainer = document.getElementById('statsGrid');
                statsContainer.innerHTML = '';
            }

            renderSitemap() {
                const container = document.getElementById('sitemapContent');
                
                container.innerHTML = `
                    <div class="code-sitemap">
                        <h2>Barnacle Films Project Sitemap</h2>
                        <div class="sitemap-code">
                            ${this.renderBarnacleCodeSitemap()}
                        </div>
                    </div>
                    <div class="project-sitemap-grid" style="margin-top:25px;">
                        <div class="project-sitemap-card">
                            <h3>Utilities & Bills</h3>
                            <p class="muted">Quick access to detailed utilities and billing stats.</p>
                            <div class="sitemap-preview">
                                <div class="hierarchy-node main">
                                    <div class="node-title">Gas (SCG)</div>
                                    <div class="node-description">Account 05000117275128 • History & monthly averages</div>
                                    <div class="node-meta">
                                        <a href="./gas-bill-stats.html" class="node-link">Open Gas Bill Stats</a>
                                    </div>
                                </div>
                                <div class="hierarchy-node main">
                                    <div class="node-title">Electricity (UI)</div>
                                    <div class="node-description">Account 01000020024211 • History & monthly averages</div>
                                    <div class="node-meta">
                                        <a href="./electric-bill-stats.html" class="node-link">Open Electric Bill Stats</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderGoalsHierarchy() {
                if (!this.allData.goals) return '<div class="hierarchy-node">No goals data available</div>';
                
                const categories = this.groupByCategory(this.allData.goals);
                
                return Object.entries(categories).map(([category, goals]) => `
                    <div class="hierarchy-node main">
                        <div class="node-title">${this.escapeHtml(category)}</div>
                        <div class="node-description">${goals.length} goals in this category</div>
                        <div class="node-meta">
                            <span class="node-tag">${goals.length} items</span>
                        </div>
                    </div>
                    ${goals.map(goal => `
                        <div class="hierarchy-node sub">
                            <div class="node-title">${this.escapeHtml(goal.title)}</div>
                            <div class="node-description">${this.escapeHtml(goal.description)}</div>
                            <div class="node-meta">
                                <span class="node-tag status-${goal.status?.toLowerCase().replace(' ', '-') || 'unknown'}">${this.escapeHtml(goal.status || 'Unknown')}</span>
                                <span class="node-tag priority-${goal.priority?.toLowerCase() || 'unknown'}">${this.escapeHtml(goal.priority || 'Unknown')}</span>
                            </div>
                        </div>
                    `).join('')}
                `).join('');
            }

            renderJobsHierarchy() {
                if (!this.allData.jobs) return '<div class="hierarchy-node">No jobs data available</div>';
                
                const organizations = this.groupByOrganization(this.allData.jobs);
                
                return Object.entries(organizations).map(([organization, jobs]) => `
                    <div class="hierarchy-node main">
                        <div class="node-title">${this.escapeHtml(organization)}</div>
                        <div class="node-description">${jobs.length} opportunities at this organization</div>
                        <div class="node-meta">
                            <span class="node-tag">${jobs.length} positions</span>
                        </div>
                    </div>
                    ${jobs.map(job => `
                        <div class="hierarchy-node sub">
                            <div class="node-title">${this.escapeHtml(job.title)}</div>
                            <div class="node-description">${this.escapeHtml(job.description)}</div>
                            <div class="node-meta">
                                <span class="node-tag">${this.escapeHtml(job.type || 'Unknown')}</span>
                                <span class="node-tag">${this.escapeHtml(job.location || 'Unknown')}</span>
                                ${job.url ? `<a href="${job.url}" class="node-link" target="_blank">View Job</a>` : ''}
                            </div>
                        </div>
                    `).join('')}
                `).join('');
            }

            renderWritingHierarchy() {
                if (!this.allData.writing) return '<div class="hierarchy-node">No writing data available</div>';
                
                const categories = this.groupByCategory(this.allData.writing);
                
                return Object.entries(categories).map(([category, projects]) => `
                    <div class="hierarchy-node main">
                        <div class="node-title">${this.escapeHtml(category)}</div>
                        <div class="node-description">${projects.length} writing projects in this category</div>
                        <div class="node-meta">
                            <span class="node-tag">${projects.length} projects</span>
                        </div>
                    </div>
                    ${projects.map(project => `
                        <div class="hierarchy-node sub">
                            <div class="node-title">${this.escapeHtml(project.title)}</div>
                            <div class="node-description">${this.escapeHtml(project.description)}</div>
                            <div class="node-meta">
                                <span class="node-tag status-${project.status?.toLowerCase().replace(' ', '-') || 'unknown'}">${this.escapeHtml(project.status || 'Unknown')}</span>
                                <span class="node-tag">${this.escapeHtml(project.wordCount || 'Unknown word count')}</span>
                                ${project.filePath ? `<a href="${project.filePath}" class="node-link" target="_blank">View File</a>` : ''}
                            </div>
                        </div>
                    `).join('')}
                `).join('');
            }

            renderFilmProductsHierarchy() {
                if (!this.allData.filmProducts) return '<div class="hierarchy-node">No film products data available</div>';
                
                const categories = this.groupByCategory(this.allData.filmProducts);
                
                return Object.entries(categories).map(([category, products]) => `
                    <div class="hierarchy-node main">
                        <div class="node-title">${this.escapeHtml(category)}</div>
                        <div class="node-description">${products.length} products/services in this category</div>
                        <div class="node-meta">
                            <span class="node-tag">${products.length} items</span>
                        </div>
                    </div>
                    ${products.map(product => `
                        <div class="hierarchy-node sub">
                            <div class="node-title">${this.escapeHtml(product.title)}</div>
                            <div class="node-description">${this.escapeHtml(product.description)}</div>
                            <div class="node-meta">
                                <span class="node-tag status-${product.status?.toLowerCase().replace(' ', '-') || 'unknown'}">${this.escapeHtml(product.status || 'Unknown')}</span>
                                <span class="node-tag">${this.escapeHtml(product.type || 'Unknown')}</span>
                                <span class="node-tag">${this.escapeHtml(product.pricing || 'Unknown pricing')}</span>
                            </div>
                        </div>
                    `).join('')}
                `).join('');
            }

            renderBarnacleCodeSitemap() {
                if (!this.allData.barnacleProjects || this.allData.barnacleProjects.length === 0) {
                    return '<div class="code-line">// No Barnacle projects data available</div>';
                }
                
                const project = this.allData.barnacleProjects[0];
                
                return `
                    <div class="code-line">// Barnacle Films Project Sitemap</div>
                    <div class="code-line">// Generated: ${new Date().toISOString().split('T')[0]}</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">I. ${this.escapeHtml(project.project)}</div>
                    <div class="code-line">   A. Studio: ${this.escapeHtml(project.studio)}</div>
                    <div class="code-line">   B. Version: ${this.escapeHtml(project.version)}</div>
                    <div class="code-line">   C. Last Updated: ${this.escapeHtml(project.last_updated)}</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">II. Monetization Strategy</div>
                    <div class="code-line">   A. Goal: ${this.escapeHtml(project.monetization_strategy.goal)}</div>
                    <div class="code-line">   B. Model: ${this.escapeHtml(project.monetization_strategy.model)}</div>
                    <div class="code-line">   C. Versioning</div>
                    <div class="code-line">      1. Shared Codebase: ${project.monetization_strategy.versioning.shared_codebase ? 'true' : 'false'}</div>
                    <div class="code-line">      2. Platform Toggle: ${this.escapeHtml(project.monetization_strategy.versioning.platform_toggle)}</div>
                    <div class="code-line">      3. Conditional Logic: ${this.escapeHtml(project.monetization_strategy.versioning.conditional_logic)}</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">III. Platform Distribution</div>
                    ${Object.entries(project.monetization_strategy.platforms).map(([platform, details], index) => `
                        <div class="code-line">   ${String.fromCharCode(65 + index)}. ${this.escapeHtml(platform)}</div>
                        <div class="code-line">      1. Price: ${this.escapeHtml(details.price)}</div>
                        <div class="code-line">      2. Ads Enabled: ${details.ads_enabled ? 'true' : 'false'}</div>
                        ${details.distribution ? `<div class="code-line">      3. Distribution: [${details.distribution.map(d => `"${d}"`).join(', ')}]</div>` : ''}
                        ${details.platforms ? `<div class="code-line">      3. Platforms: [${details.platforms.map(p => `"${p}"`).join(', ')}]</div>` : ''}
                        ${details.ad_frequency_minutes ? `<div class="code-line">      4. Ad Frequency: ${details.ad_frequency_minutes} minutes</div>` : ''}
                        ${details.ad_type ? `<div class="code-line">      5. Ad Type: ${this.escapeHtml(details.ad_type)}</div>` : ''}
                        ${details.monetization ? `<div class="code-line">      6. Monetization: ${this.escapeHtml(details.monetization)}</div>` : ''}
                        ${details.remove_ads_upgrade ? `
                            <div class="code-line">      7. Remove Ads Upgrade</div>
                            <div class="code-line">         a. Price: $${details.remove_ads_upgrade.price_usd}</div>
                            <div class="code-line">         b. Entitlement: ${this.escapeHtml(details.remove_ads_upgrade.entitlement_type || 'N/A')}</div>
                            <div class="code-line">         c. UI Location: ${this.escapeHtml(details.remove_ads_upgrade.ui_location || 'N/A')}</div>
                        ` : ''}
                        ${details.cross_promotion !== undefined ? `<div class="code-line">      8. Cross Promotion: ${details.cross_promotion ? 'true' : 'false'}</div>` : ''}
                        ${details.revenue_goal ? `<div class="code-line">      9. Revenue Goal: ${this.escapeHtml(details.revenue_goal)}</div>` : ''}
                        ${details.notes ? `<div class="code-line">      10. Notes: ${this.escapeHtml(details.notes)}</div>` : ''}
                        <div class="code-line"></div>
                    `).join('')}
                    
                    <div class="code-line">IV. Technical Implementation</div>
                    <div class="code-line">   A. Ad Delivery: ${this.escapeHtml(project.monetization_strategy.technical_notes.ad_delivery)}</div>
                    <div class="code-line">   B. Ad Client: ${this.escapeHtml(project.monetization_strategy.technical_notes.ad_client)}</div>
                    <div class="code-line">   C. Integration Point: ${this.escapeHtml(project.monetization_strategy.technical_notes.integration_point)}</div>
                    <div class="code-line">   D. Reward System: ${this.escapeHtml(project.monetization_strategy.technical_notes.reward_system)}</div>
                    <div class="code-line">   E. Platform Detection: ${this.escapeHtml(project.monetization_strategy.technical_notes.platform_detection)}</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">V. Player Experience</div>
                    <div class="code-line">   A. Ad Interruption Points: [${project.monetization_strategy.player_experience.ad_interruption_points.map(p => `"${p}"`).join(', ')}]</div>
                    <div class="code-line">   B. Skippable After: ${project.monetization_strategy.player_experience.skippable_after_seconds} seconds</div>
                    <div class="code-line">   C. Tone: ${this.escapeHtml(project.monetization_strategy.player_experience.tone)}</div>
                    <div class="code-line">   D. Premium Incentive: ${this.escapeHtml(project.monetization_strategy.player_experience.premium_incentive)}</div>
                    <div class="code-line">   E. Offline Mode: ${this.escapeHtml(project.monetization_strategy.player_experience.offline_mode)}</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">VI. Future Expansion</div>
                    <div class="code-line">   A. Sponsorship Model: ${this.escapeHtml(project.monetization_strategy.future_expansion.sponsorship_model)}</div>
                    <div class="code-line">   B. Cross Promotion: ${this.escapeHtml(project.monetization_strategy.future_expansion.cross_promo)}</div>
                    <div class="code-line">   C. Metrics: ${this.escapeHtml(project.monetization_strategy.future_expansion.metrics)}</div>
                    <div class="code-line">   D. Additional Revenue: [${project.monetization_strategy.future_expansion.additional_revenue.map(r => `"${r}"`).join(', ')}]</div>
                    <div class="code-line"></div>
                    
                    <div class="code-line">// End of sitemap</div>
                `;
            }

            groupByCategory(items) {
                return items.reduce((groups, item) => {
                    const category = item.category || 'Uncategorized';
                    if (!groups[category]) {
                        groups[category] = [];
                    }
                    groups[category].push(item);
                    return groups;
                }, {});
            }

            groupByOrganization(jobs) {
                return jobs.reduce((groups, job) => {
                    const org = job.organization || 'Unknown Organization';
                    if (!groups[org]) {
                        groups[org] = [];
                    }
                    groups[org].push(job);
                    return groups;
                }, {});
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            showError(message) {
                const container = document.querySelector('.sitemap-container');
                container.innerHTML = `
                    <div class="error-state">
                        <h2>Error</h2>
                        <p>${message}</p>
                        <button onclick="location.reload()">Reload Page</button>
                    </div>
                `;
            }
        }

        // Initialize the page when it loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                new SitemapPage();
            });
        } else {
            new SitemapPage();
        }
    </script>
    </body>
</html>
